"use strict";StackExchange.mathjaxEditing=function(){function e(e,t,n){var i=r.slice(e,t+1).join("").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");for(m.Browser.isMSIE&&(i=i.replace(/(%[^\n]*)\n/g,"$1<br/>\n"));t>e;)r[t]="",t--;r[e]="@@"+d.length+"@@",n&&(i=n(i)),d.push(i),s=c=u=null}function t(t){s=c=u=null,d=[];var n,i=/`/.test(t);i?(t=t.replace(/~/g,"~T").replace(/(^|[^\\`])(`+)(?!`)([^\n]*?[^`\n])\2(?!`)/gm,function(e){return e.replace(/\$/g,"~D")}),n=function(e){return e.replace(/~([TD])/g,function(e,t){return{"T":"~","D":"$"}[t]})}):n=function(e){return e},r=v(t.replace(/\r\n?/g,"\n"),b);for(var a=1,o=r.length;o>a;a+=2){var p=r[a];"@"===p.charAt(0)?(r[a]="@@"+d.length+"@@",d.push(p)):s?p===c?l?u=a:e(s,a,n):p.match(/\n.*\n/)?(u&&(a=u,e(s,a,n)),s=c=u=null,l=0):"{"===p?l++:"}"===p&&l&&l--:p===g||"$$"===p?(s=a,c=p,l=0):"begin"===p.substr(1,5)&&(s=a,c="\\end"+p.substr(6),l=0)}return u&&e(s,u,n),n(r.join(""))}function n(e){return e=e.replace(/@@(\d+)@@/g,function(e,t){return d[t]}),d=null,e}function i(){f=!1,m.cancelTypeset=!1,m.Queue(["Typeset",m,h])}function a(){!f&&p&&(f=!0,m.Cancel(),m.Queue(i))}function o(e,i,o){h=document.getElementById("wmd-preview"+i),g=o[0][0];var r=e.getConverter();r.hooks.chain("preConversion",t),r.hooks.chain("preSafe",n),e.hooks.chain("onPreviewRefresh",a)}var r,s,c,u,l,d,p=!1,f=!1,h=null,g="$",m=MathJax.Hub;m.Queue(function(){p=!0,m.processUpdateTime=50,m.Config({"HTML-CSS":{"EqnChunk":10,"EqnChunkFactor":1},"SVG":{"EqnChunk":10,"EqnChunkFactor":1}})});var v,b=/(\$\$?|\\(?:begin|end)\{[a-z]*\*?\}|\\[\\{}$]|[{}]|(?:\n\s*)+|@@\d+@@)/i;return v=3==="aba".split(/(b)/).length?function(e,t){return e.split(t)}:function(e,t){var n,i=[];if(!t.global){var a=t.toString(),o="";a=a.replace(/^\/(.*)\/([im]*)$/,function(e,t,n){return o=n,t}),t=new RegExp(a,o+"g")}t.lastIndex=0;for(var r=0;n=t.exec(e);)i.push(e.substring(r,n.index)),i.push.apply(i,n.slice(1)),r=n.index+n[0].length;return i.push(e.substring(r)),i},{"prepareWmdForMathJax":o}}(),function(){var e=MathJax.Hub;if(!e.Cancel){e.cancelTypeset=!1;var t="MathJax Canceled";e.Register.StartupHook("HTML-CSS Jax Config",function(){var n=MathJax.OutputJax["HTML-CSS"],i=n.Translate;n.Augment({"Translate":function(a,o){if(e.cancelTypeset||o.cancelled)throw Error(t);return i.call(n,a,o)}})}),e.Register.StartupHook("SVG Jax Config",function(){var n=MathJax.OutputJax.SVG,i=n.Translate;n.Augment({"Translate":function(a,o){if(e.cancelTypeset||o.cancelled)throw Error(t);return i.call(n,a,o)}})}),e.Register.StartupHook("TeX Jax Config",function(){var n=MathJax.InputJax.TeX,i=n.Translate;n.Augment({"Translate":function(a,o){if(e.cancelTypeset||o.cancelled)throw Error(t);return i.call(n,a,o)}})});var n=e.processError;e.processError=function(i,a,o){return i.message!==t?n.call(e,i,a,o):(MathJax.Message.Clear(0,0),a.jaxIDs=[],a.jax={},a.scripts=[],a.i=a.j=0,a.cancelled=!0,null)},e.Cancel=function(){this.cancelTypeset=!0}}}();